# Cursor Rules - 既存機能の保護

## 🛡️ 保護対象ファイル - 編集・削除禁止

以下のファイルは本番環境で稼働中の重要機能です。絶対に削除・大幅変更しないでください。

### MongoDB接続
- `/src/lib/mongodb.ts` - DB接続ロジック（絶対に触らない）
- `/src/models/Contact.ts` - Mongooseスキーマ（絶対に触らない）

### APIルート
- `/src/app/api/contact/route.ts` - お問い合わせAPI（絶対に触らない）

### お問い合わせページ
- `/src/app/contact/page.tsx` - 機能は保持、デザイン調整のみ許可

## ⚠️ 環境変数
以下の環境変数は必須です。削除・変更しないこと：
- `MONGODB_URI` - MongoDB接続文字列
- `SMTP_HOST` - メールサーバーホスト
- `SMTP_USER` - メールユーザー
- `SMTP_PASS` - メールパスワード
- `ADMIN_EMAIL` - 管理者メールアドレス

## ✅ 許可される操作

### 新規作成OK
- `/src/components/` 配下への新規コンポーネント追加
- `/src/app/` 配下への新規ページ追加
- `/public/` 配下への画像・アセット追加
- スタイル関連ファイルの追加

### 編集OK（機能を壊さない範囲で）
- `/src/app/page.tsx` - LPメインページのデザイン変更
- `/src/app/layout.tsx` - レイアウト調整
- `/src/theme/theme.ts` - テーマ設定変更
- 各種法的ページ（terms, privacy, legal）のデザイン変更

## 📋 実装時のルール

1. **新しいコンポーネントは `/src/components` 配下に追加**
2. **既存のAPIルートは触らない**
3. **package.json から既存の依存関係を削除しない**
4. **環境変数の参照を変更しない**
5. **お問い合わせフォームの機能（バリデーション、送信ロジック）は保持**

## 🔄 安全な開発フロー

1. 変更前に `git status` で現状確認
2. 段階的に実装し、各ステップで動作確認
3. 既存機能が壊れていないことを確認してからコミット




