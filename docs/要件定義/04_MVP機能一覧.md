# MVP機能一覧

## 概要

本ドキュメントでは、AIコードレビュー学習サービスのMVP（Minimum Viable Product）として実装する機能を、MoSCoW法により優先度分類する。MVP期間は8週間を想定し、開発リソースと技術制約を考慮した現実的なスコープを定義する。

---

## 技術スタック（前提条件）

| レイヤー | 技術 | 備考 |
|---------|------|------|
| フロントエンド | Next.js 15 (App Router) | React Server Components活用 |
| UIライブラリ | MUI (Material-UI) | 開発速度優先 |
| データベース | MongoDB + Mongoose | スキーマ柔軟性 |
| 認証 | NextAuth.js | メール認証対応 |
| メール送信 | Nodemailer | 認証メール・通知用 |
| AI API | Claude Haiku 4.5 | コードレビュー生成 |

---

## MoSCoW分類サマリ

| 分類 | 機能数 | 工数目安（合計） |
|------|--------|-----------------|
| Must Have（必須） | 5機能 | 約160時間 |
| Should Have（重要） | 4機能 | 約80時間 |
| Could Have（あると良い） | 4機能 | 約60時間 |
| Won't Have（対象外） | 5機能 | - |

**MVP期間の総工数目安**：約240〜300時間（Must + Should + 一部Could）

---

## Must Have（必須）- MVP のコア機能

### M-01: ユーザー認証システム

| 項目 | 内容 |
|------|------|
| 概要 | メールアドレス・パスワードによる会員登録・ログイン機能 |
| 対応ニーズ | C-04（安全性）、E-03（プライバシー） |
| 工数目安 | **L**（約40時間） |
| 期待効果 | ユーザーデータの永続化、セキュアなサービス提供の基盤 |

**実装詳細**

```
機能要件：
├── 会員登録（メール・パスワード）
├── メール認証（Nodemailer経由）
├── ログイン・ログアウト
├── パスワードリセット
└── セッション管理（NextAuth.js）

技術実装：
├── NextAuth.js Credentials Provider
├── MongoDB Users コレクション
├── bcrypt によるパスワードハッシュ化
└── JWT セッショントークン
```

**受け入れ条件**

- [ ] メールアドレス・パスワードで新規登録できる
- [ ] 認証メールのリンククリックで本登録完了する
- [ ] 登録済みメールでログインできる
- [ ] パスワードリセットメールが送信される
- [ ] ログアウト後は認証が必要なページにアクセスできない

---

### M-02: コード入力・レビュー実行

| 項目 | 内容 |
|------|------|
| 概要 | コードを入力し、AIレビューを実行する中核機能 |
| 対応ニーズ | F-01（問題点指摘）、C-01（短時間）、C-06（直感的） |
| 工数目安 | **XL**（約50時間） |
| 期待効果 | サービスの根幹価値を提供、ユーザーのアハモーメント創出 |

**実装詳細**

```
機能要件：
├── コードエディタ（シンタックスハイライト付き）
├── プログラミング言語選択（Python/JavaScript/TypeScript）
├── レビュー実行ボタン
├── ローディング表示（進捗インジケーター）
└── サンプルコード挿入ボタン

技術実装：
├── Monaco Editor または CodeMirror
├── Claude Haiku 4.5 API 呼び出し
├── Next.js API Routes（POST /api/review）
├── レスポンスストリーミング（オプション）
└── 入力バリデーション（最大1000行）
```

**受け入れ条件**

- [ ] コードを入力欄にペーストまたは直接入力できる
- [ ] Python/JavaScript/TypeScriptから言語を選択できる
- [ ] 「レビュー実行」クリックで3-5秒以内にレビュー結果が表示される
- [ ] サンプルコードボタンでサンプルが挿入される
- [ ] 1000行を超えるコードはエラーメッセージを表示する

---

### M-03: レビュー結果表示

| 項目 | 内容 |
|------|------|
| 概要 | AIからのレビュー結果を分かりやすく表示 |
| 対応ニーズ | F-06（日本語解説）、F-07（修正コード例）、E-02（自信） |
| 工数目安 | **L**（約35時間） |
| 期待効果 | 学習効果の最大化、ユーザー満足度向上 |

**実装詳細**

```
機能要件：
├── 指摘事項のリスト表示
├── 重要度による並び替え（Critical/Warning/Info）
├── 各指摘の詳細解説（日本語）
├── 改善後のコード例表示
├── 良い点のフィードバック（ポジティブ評価）
└── 該当行のハイライト表示

技術実装：
├── Claude API レスポンスのパース・構造化
├── MUI Card/Accordion コンポーネント
├── コード差分表示（diff形式）
└── 行番号リンク（エディタ連携）
```

**受け入れ条件**

- [ ] レビュー結果が重要度順（Critical→Warning→Info）で表示される
- [ ] 各指摘に日本語の詳細解説が含まれる
- [ ] 修正後のコード例が表示される
- [ ] 問題がない場合「良い点」としてポジティブフィードバックが表示される
- [ ] 指摘該当行がコードエディタ上でハイライトされる

---

### M-04: レビュー履歴保存・閲覧

| 項目 | 内容 |
|------|------|
| 概要 | 過去のレビュー結果を保存し、後から閲覧できる |
| 対応ニーズ | F-09（履歴確認）、E-01（成長実感）、C-05（中断再開） |
| 工数目安 | **M**（約20時間） |
| 期待効果 | 学習の振り返り、継続利用の動機付け |

**実装詳細**

```
機能要件：
├── レビュー結果の自動保存
├── 履歴一覧表示（直近20件）
├── 履歴詳細表示（過去のコード・結果）
├── 履歴の削除機能
└── 日時・言語でのフィルタリング

技術実装：
├── MongoDB Reviews コレクション
├── ユーザーIDとの紐付け
├── ページネーション実装
└── インデックス最適化（ユーザーID + 作成日時）
```

**受け入れ条件**

- [ ] レビュー実行後、結果が自動的に履歴に保存される
- [ ] ダッシュボードから過去の履歴一覧を確認できる
- [ ] 履歴をクリックすると当時のコード・レビュー結果が表示される
- [ ] 不要な履歴を削除できる
- [ ] 直近20件までの履歴が保存される

---

### M-05: ダッシュボード・初回ガイド

| 項目 | 内容 |
|------|------|
| 概要 | ログイン後のホーム画面、初回利用者向けガイド |
| 対応ニーズ | C-06（直感的）、E-03（恥ずかしくない） |
| 工数目安 | **S**（約15時間） |
| 期待効果 | 初回利用のハードル低下、離脱率改善 |

**実装詳細**

```
機能要件：
├── ログイン後ダッシュボード表示
├── クイックアクション（新規レビュー開始）
├── 直近のレビュー履歴サマリ
├── 初回利用ガイド（モーダル or ステップ）
└── 利用統計サマリ（レビュー回数等）

技術実装：
├── Next.js App Router レイアウト
├── MUI Dashboard テンプレート
├── 初回フラグ管理（ユーザーDB）
└── モーダルコンポーネント
```

**受け入れ条件**

- [ ] ログイン後にダッシュボードが表示される
- [ ] 「新規レビュー」ボタンが目立つ位置に配置される
- [ ] 初回ログイン時にガイドモーダルが表示される
- [ ] ガイドは「次回から表示しない」で非表示にできる
- [ ] 直近の履歴サマリが表示される

---

## Should Have（重要）- ユーザー満足度向上機能

### S-01: レビュー観点選択

| 項目 | 内容 |
|------|------|
| 概要 | セキュリティ/パフォーマンス/可読性など観点を選択 |
| 対応ニーズ | F-02（セキュリティ）、F-03（パフォーマンス）、F-10（観点選択） |
| 工数目安 | **M**（約20時間） |
| 期待効果 | ユーザーの目的に合った的確なフィードバック |

**実装詳細**

```
機能要件：
├── レビュー観点のチェックボックス選択
│   ├── セキュリティ
│   ├── パフォーマンス
│   ├── 可読性・命名規則
│   ├── ベストプラクティス
│   └── 全般（デフォルト）
└── 選択した観点に応じたプロンプト調整

技術実装：
├── Claude プロンプトテンプレート分岐
├── MUI Checkbox Group
└── ユーザー設定としてデフォルト観点を保存
```

**受け入れ条件**

- [ ] レビュー実行前に観点を選択できる
- [ ] 選択した観点に応じたレビュー結果が返される
- [ ] 観点未選択時は「全般」がデフォルト適用される

---

### S-02: 学習進捗表示

| 項目 | 内容 |
|------|------|
| 概要 | レビュー回数・指摘傾向の可視化 |
| 対応ニーズ | E-01（成長実感）、E-04（達成感） |
| 工数目安 | **M**（約25時間） |
| 期待効果 | 継続利用のモチベーション維持 |

**実装詳細**

```
機能要件：
├── 累計レビュー回数表示
├── 学習ストリーク（連続利用日数）
├── 指摘カテゴリ別の傾向グラフ
└── 月間・週間の利用推移

技術実装：
├── MongoDB Aggregation Pipeline
├── Chart.js または Recharts
└── ダッシュボードウィジェット
```

**受け入れ条件**

- [ ] ダッシュボードに累計レビュー回数が表示される
- [ ] 連続利用日数（ストリーク）が表示される
- [ ] 指摘傾向がグラフで可視化される

---

### S-03: レスポンシブUI

| 項目 | 内容 |
|------|------|
| 概要 | スマートフォン・タブレットでの利用対応 |
| 対応ニーズ | C-02（スマホ対応） |
| 工数目安 | **M**（約20時間） |
| 期待効果 | 利用シーン拡大、通勤時間での学習対応 |

**実装詳細**

```
機能要件：
├── スマートフォン画面での最適化表示
├── タッチ操作対応
├── コードエディタのモバイル対応
└── 結果表示のスクロール最適化

技術実装：
├── MUI レスポンシブグリッド
├── CSS Media Queries
├── モバイル用コードエディタ設定
└── ビューポート最適化
```

**受け入れ条件**

- [ ] スマートフォン（幅375px〜）で全画面が正常表示される
- [ ] タブレット（幅768px〜）でレイアウトが最適化される
- [ ] コードエディタがモバイルで操作可能である

---

### S-04: メールリマインダー

| 項目 | 内容 |
|------|------|
| 概要 | 学習継続を促すリマインダーメール |
| 対応ニーズ | E-07（孤独感軽減）、習慣化フェーズ支援 |
| 工数目安 | **S**（約15時間） |
| 期待効果 | リテンション率向上、休眠ユーザーの復帰 |

**実装詳細**

```
機能要件：
├── 週次学習リマインダー（オプトイン）
├── 7日間未利用時のリマインダー
├── 配信停止設定
└── メールテンプレート

技術実装：
├── Nodemailer + テンプレートエンジン
├── Cron Job（Vercel Cron または外部サービス）
├── ユーザー設定管理
└── 配信ログ管理
```

**受け入れ条件**

- [ ] ユーザー設定でリマインダーのオン/オフを切り替えられる
- [ ] 週1回のリマインダーメールが配信される
- [ ] メール内のリンクから配信停止できる

---

## Could Have（あると良い）- 追加価値機能

### C-01: Google OAuth ログイン

| 項目 | 内容 |
|------|------|
| 概要 | Googleアカウントでのソーシャルログイン |
| 対応ニーズ | 登録ハードル低下 |
| 工数目安 | **S**（約10時間） |
| 期待効果 | 登録完了率の向上（推定+10〜15%） |

**実装詳細**

```
技術実装：
├── NextAuth.js Google Provider
├── OAuth 2.0 設定
└── 既存メール認証との統合
```

---

### C-02: コード下書き保存

| 項目 | 内容 |
|------|------|
| 概要 | レビュー実行前のコードを一時保存 |
| 対応ニーズ | C-05（中断再開） |
| 工数目安 | **S**（約10時間） |
| 期待効果 | 途中離脱後の復帰率向上 |

**実装詳細**

```
技術実装：
├── LocalStorage による自動保存
├── MongoDB Drafts コレクション（オプション）
└── 復元確認モーダル
```

---

### C-03: 対応言語拡張（Go/Java）

| 項目 | 内容 |
|------|------|
| 概要 | Go, Java のレビュー対応追加 |
| 対応ニーズ | F-05（ベストプラクティス）拡張 |
| 工数目安 | **M**（約20時間） |
| 期待効果 | ターゲットユーザー層の拡大 |

**実装詳細**

```
技術実装：
├── 言語別プロンプトテンプレート追加
├── シンタックスハイライト設定
└── 言語別サンプルコード
```

---

### C-04: ダークモード

| 項目 | 内容 |
|------|------|
| 概要 | ダークテーマ切り替え機能 |
| 対応ニーズ | 夜間利用時の目の負担軽減 |
| 工数目安 | **M**（約20時間） |
| 期待効果 | ユーザー体験向上、開発者フレンドリー |

**実装詳細**

```
技術実装：
├── MUI テーマ切り替え
├── CSS変数によるカラー管理
├── ユーザー設定保存
└── システム設定連動
```

---

## Won't Have（対象外）- MVP では実装しない

| 機能 | 除外理由 | 将来検討時期 |
|------|---------|-------------|
| 複数ファイルレビュー | APIコスト大、実装複雑 | v2.0以降 |
| リアルタイムコラボレーション | MVP範囲外、インフラコスト | v2.0以降 |
| チーム機能（組織管理） | BtoB向け機能、MVP後検討 | v2.0以降 |
| ネイティブモバイルアプリ | 開発リソース不足 | ユーザー数拡大後 |
| 他サービス連携（GitHub等） | OAuth複雑化、スコープ拡大 | v1.5以降 |

---

## 実装スケジュール（8週間）

### 週別計画

| 週 | 実装内容 | 工数目安 |
|----|---------|---------|
| Week 1 | 環境構築、DB設計、認証基盤（M-01） | 40h |
| Week 2 | コード入力画面、エディタ実装（M-02前半） | 35h |
| Week 3 | Claude API連携、レビュー実行（M-02後半） | 35h |
| Week 4 | レビュー結果表示（M-03） | 35h |
| Week 5 | 履歴機能、ダッシュボード（M-04, M-05） | 35h |
| Week 6 | 観点選択、進捗表示（S-01, S-02） | 40h |
| Week 7 | レスポンシブ対応、リマインダー（S-03, S-04） | 35h |
| Week 8 | テスト、バグ修正、ベータリリース準備 | 30h |

### マイルストーン

| マイルストーン | 完了週 | 含まれる機能 |
|--------------|--------|-------------|
| α版（内部テスト） | Week 5 | M-01〜M-05 |
| β版（限定公開） | Week 7 | M-01〜M-05, S-01〜S-04 |
| MVP版（一般公開） | Week 8 | 全Must + Should |

---

## 工数見積もりの凡例

| サイズ | 工数目安 | 説明 |
|--------|---------|------|
| XS | 〜5時間 | 軽微な修正・追加 |
| S | 5〜15時間 | 小規模機能 |
| M | 15〜25時間 | 中規模機能 |
| L | 25〜40時間 | 大規模機能 |
| XL | 40時間〜 | 複合的な大規模機能 |

---

## リスクと対策

| リスク | 影響度 | 対策 |
|--------|--------|------|
| Claude API レイテンシー悪化 | 高 | ストリーミング対応、タイムアウト設定 |
| APIコスト超過 | 中 | 1日あたりのレビュー回数制限（無料枠） |
| 認証メール到達率低下 | 中 | 複数SMTPプロバイダー検討 |
| モバイルエディタの操作性 | 低 | デスクトップ優先、段階的改善 |

---

## 更新履歴

| 日付 | 更新内容 | 担当 |
|------|---------|------|
| 2024-12-03 | 初版作成 | - |

